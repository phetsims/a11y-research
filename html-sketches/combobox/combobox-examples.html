<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Combobox Examples</title>
  <!-- Style Sheets -->

</head>
<body>
	<h1>Combobox</h1>
	
	<h2>Example 1: HTML <code>select</code> and <code>option</code> elements</h2>
	<p>The HTML design pattern with <code>select</code> element with <code>option</code> elements works fine in Voice Over on Safari. The HTML <code>size</code> attribute can be used to make a designated number of options persist visually; however, this is undesirable in this case, and likely for most of PhET's interactive sim elements of this type (i.e., pop-up menus/comboboxes).</p>
	
	<p>Functionally, both the Up and Down Arrow keys activate (pop-up) the collpased list of options. We may want to consider adjusting the visual prompts which only indicates the Up Arrow. Also in the visual, a selected item is not visually indicated. We may want to add a visual checkmark (or some visual cue) to visually indicate which item is currently selected.</p>
	
	<h3>Working <code>select</code> box</h3>
	
	<label for="solute-options">Solute:</label>
	<select id="solute-options" name="select">
		<option value="1">Drink mix</option>
		<option value="2">Colbalt (II) nitrate</option>
		<option value="3">Colbalt Chloride</option>
		<option value="4">Potassium dichromate</option>
		<option value="5">Gold (III) chloride</option>
		<option value="6">Potassium chromate</option>
		<option value="7">Nickel (II) chloride</option>
		<option value="8">Copper sulfate</option>
		<option value="9">Potassium permanganate</option>
		<option value="10">Potassium dichromate</option>
	</select>
	
	<h3>Code for <code>select</code> box</h3>
	<pre>
&lt;label for="solute-options"&gt;Solute:&lt;/label&gt;
&lt;select id="solute-options" name="select"&gt;
  &lt;option value="1"&gt;Drink mix&lt;/option&gt;
  &lt;option value="2"&gt;Colbalt (II) nitrate&lt;/option&gt;
  &lt;option value="3"&gt;Colbalt Chloride&lt;/option>
  &lt;option value="4"&gt;Potassium dichromate&lt;/option&gt;
  &lt;option value="5"&gt;Gold (III) chloride&lt;/option&gt;
  &lt;option value="6"&gt;Potassium chromate&lt;/option&gt;
  &lt;option value="7"&gt;Nickel (II) chloride&lt;/option&gt;
  &lt;option value="8"&gt;Copper sulfate&lt;/option&gt;
  &lt;option value="9"&gt;Potassium permanganate&lt;/option&gt;
  &lt;option value="10">Potassium dichromate&lt;/option&gt;
&lt;/select&gt;
	</pre>
	
	<h3>Visual Examples with focus highlights</h3>
	
	<ol>
		<li>Combobox gains focus with the Tab key (or other method). Not sure if we need the checkmark on the selected item when the combobox is collapsed.
	<img src="molarity-combobox-focused.jpg" alt="Molary combobox with focused and checked color."></li>
	
	<li>Up Arrow or Down Arrow opens the list of solutes. The selected item has focus when the combobox is opened. A visual checkmark has been added for emphasis.
	<img src="molarity-selected-item-focused.jpg" alt="Molary combobox selected item focused."></li>
	
	<li>Focus highlight moves with Up and Down Arrow keys, and the selected item stays checked until a new selection is made by pressing the Enter key. Combobox closes when a new item is selected with the Enter key. Escape key also closes the list of options with making a change.
	<img src="molarity-unselected-item-focused.jpg" alt="Molary combobox unselected item focused."></li>
</ol>
	
	
	<h2>Example 2: ARIA 1.0 Design Pattern</h2>

	<p>The ARIA 1.1 design pattern is not yet supported. Both the 1.1 and 1.0 design patterns seem very complicated to me. And since our PDOM is visually hidden, I think the HTML solution in Example 1, above, is better for us.</p>
	
	<p>In ARIA 1.1, the <code>role=”combobox”</code> is now a composite widget, meaning that it supports child element roles including active element roles embedded within it. However, the design pattern is too new to use.</p>
	
	<p>In the ARIA 1.0 design pattern example below, there are three attributes on the focusable HTML input element that has the <code>role="combobox"</code> that have to be maintained dynamically. These are:</p>
	<ul>
		<li><code>aria-expanded</code></li>
		<li><code>aria-controls</code></li>
		<li><code>aria-activedescendant</code> (Also, this attribute might not be allowed on the input element)</li>
	</ul>
	<p>I think in our case the widget is readonly, as it is not editable, but placing the HTML5 <code>readonly</code> attribute on the input element removes the element from the Tab order. The code below is a non-working example. See <a href="http://whatsock.com/tsg/Coding%20Arena/ARIA%20Comboboxes/ARIA%20Comboboxes%20(Simulated,%20Readonly)/demo.htm">Whatsock for a working example</a>. This is the pattern I tried to follow.</p>
 
 <h3>Non-working <code>combobox</code> widget</h3>
	<input id="solute-comboxbox" tabindex="0" aria-label="Solute" type="text" role="combobox" aria-expanded="false" aria-autocomplete="list" aria-controls="owned-solute-listbox" aria-activedescendent="" readonly>
	<ul role="listbox" id="owned-solute-listbox">
		<li role="option" id="solute-option-01">Drink mix</li>
		<li role="option" id="solute-option-02">Colbalt (II) nitrate</li>
		<li role="option" id="solute-option-03">Colbalt Chloride</li>
		<li role="option" id="solute-option-04">Potassium dichromate</li>
		<li role="option" id="solute-option-05">Gold (III) chloride</li>
		<li role="option" id="solute-option-06">Potassium chromate</li>
		<li role="option" id="solute-option-07">Nickel (II) chloride</li>
		<li role="option" id="solute-option-08">Copper sulfate</li>
		<li role="option" id="solute-option-09">Potassium permanganate</li>
		<li role="option" id="solute-option-10">Potassium dichromate</li>
	</ul>
	
	<h3>Code for <code>combobox</code> widget</h3>
	<pre>
&lt;input id="solute-comboxbox" tabindex="0" aria-label="Solute" type="text" 
role="combobox" aria-expanded="false" aria-autocomplete="list" 
aria-controls="owned-solute-listbox" aria-activedescendent="" readonly&gt;
&lt;ul role="listbox" id="owned-solute-listbox"&gt;
  &lt;li role="option" id="solute-option-01"&gt;Drink mix&lt;/li&gt;
  &lt;li role="option" id="solute-option-02"&gt;Colbalt (II) nitrate&lt;/li&gt;
  &lt;li role="option" id="solute-option-03"&gt;Colbalt Chloride&lt;/li&gt;
  &lt;li role="option" id="solute-option-04"&gt;Potassium dichromate&lt;/li&gt;
  &lt;li role="option" id="solute-option-05"&gt;Gold (III) chloride&lt;/li&gt;
  &lt;li role="option" id="solute-option-06"&gt;Potassium chromate&lt;/li&gt;
  &lt;li role="option" id="solute-option-07"&gt;Nickel (II) chloride&lt;/li&gt;
  &lt;li role="option" id="solute-option-08"&gt;Copper sulfate&lt;/li&gt;
  &lt;li role="option" id="solute-option-09"&gt;Potassium permanganate&lt;/li&gt;
  &lt;li role="option" id="solute-option-10"&gt;Potassium dichromate&lt;/li&gt;
&lt;/ul&gt;		
	</pre>
	
</body>
</html>		